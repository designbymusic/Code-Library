/*! 
 * Riloadr.js 1.2.0 (c) 2012 Tubal Martin - MIT license
 */
!function(a){typeof define=="function"&&define.amd?define(a):window.Riloadr=a()}(function(){function _(a){function O(){ib(I,l,E),ib(I,m,G),T&&($=I[y],ib(I,F,K))}function P(){jb(I,l,E),jb(I,m,G),T&&jb(I,F,K)}function Q(a,b){a[p]=0,a[n]=V,a[o]=W,a.src=cb(a,h,N),L.splice(b,1)}function V(){var b=this;b[n]=b[o]=e,b[s]=b[s].replace(t,"$1$2"),n in a&&a[n][g](b),X()}function W(){var c=this;o in a&&a[o][g](c),c[p]<A?(c[p]++,c.src=cb(c,h,N,b)):X()}function X(){M--,M==0&&v in a&&a[v]()}var f=this,h=a.base||j,i=a.breakpoints||hb('"breakpoints" not defined.'),q=a.name||"responsive",t=new RegExp("(^|\\s)"+q+"(\\s|$)"),u=a.defer&&a.defer.toLowerCase()||c,x=a.foldDistance||100,z=a.ignoreLowBandwidth||c,A=a[p]||0,B=a.root||e,C=u==="belowfold"&&S&&!Y,E=C&&eb(function(){f[w]()},d),G=C&&fb(function(){f[w]()},d),K=C&&fb(function(){I[y]!==$&&($=I[y],f[w]())},d),L=[],M=0,N;f[w]=function(a){gb(function(c,d,f){if(!L[k]||a===b){C&&O(),c=R&&B[D]("img."+q)||B.getElementsByTagName("img"),f=0;while(d=c[f])d&&!d[r]&&(R||d[s].indexOf(q)>=0)&&(d[r]=b,L.push(d),M++),f++}if(L[k]){f=0;while(d=L[f])d&&(!C||C&&!db(d,x))&&(Q(d,f),f--),f++}C&&!L[k]&&P(),c=d=e})},Z(function(){H=J.body,B=J.getElementById(B)||H,U=U||bb(),N=ab(i,U,z),!u||C?f[w]():kb(f[w])})}function ab(a,b,c){var d=j,e=b,f=0,g,h,i,k,l;while(g=a[f]){h=g.name,i=g.minWidth,k=g.maxWidth,l=g.minDevicePixelRatio;if(b>0){if(i&&k&&b>=i&&b<=k||i&&!k&&b>=i||k&&!i&&b<=k)if(!l||l&&W>=l&&(c||!c&&!X))d=h}else if(e<=0||i<e||k<e)e=i||k||e,d=h;f++}return d+j}function bb(){var a=Math,b=[K.clientWidth,K.offsetWidth,H.clientWidth],c=a.ceil(V/W),d=b[k],e=0,f;for(;e<d;e++)isNaN(b[e])&&(b.splice(e,1),e--);return b[k]&&(f=a.max[h](a,b),isNaN(c)||(f=a.min(c,f))),f||c||0}function cb(a,b,c,d){var e=(a.getAttribute("data-base")||b)+(a.getAttribute("data-src")||j);return d&&(e+=(P.test(e)?"&":"?")+"riloadrts="+(new Date).getTime()),e.replace(Q,c)}function db(a,b){var c=K[u]||H[u]||0,d=J.compatMode==="CSS1Compat"&&K[A]||H&&H[A]||K[A];return d<=a[G]().top-c-b}function X(){var a=I.navigator,b=a.connection||a.mozConnection||a.webkitConnection||a.oConnection||a.msConnection||{},c=b.type||"unknown",d=+b.bandwidth||Infinity;return d>0&&d<.1||/^[23]g|3|4$/.test(c+j)}function eb(a,b){function j(){i=new Date,g=e,a[h](f,c)}var c,d,f,g,i=0;return function(){var e=new Date,k=b-(e-i);return c=arguments,f=this,k<=0?(i=e,d=a[h](f,c)):g||(g=setTimeout(j,k)),d}}function fb(a,b,c){function j(){i=e,c||a[h](g,d)}var d,f,g,i;return function(){var e=c&&!i;return d=arguments,g=this,clearTimeout(i),i=setTimeout(j,b),e&&(f=a[h](g,d)),f}}function gb(a){var b=Array[t].slice[g](arguments,1);setTimeout(function(){return a[h](e,b)},1)}function hb(a){throw new Error("Riloadr: "+a)}function ib(a,b,d){a[N](M+b,d,c)}function jb(a,b,d){a[O](M+b,d,c)}function kb(a){if(J[x]===q)a();else{var b=function(){jb(I,f,b),a()};ib(I,f,b)}}"use strict";var a="on",b=!0,c=!1,d=250,e=null,f="load",g="call",h="apply",i="error",j="",k="length",l="scroll",m="resize",n=a+f,o=a+i,p="retries",q="complete",r="riloaded",s="className",t="prototype",u="clientTop",v=a+q,w="loadImages",x="readyState",y="orientation",z="attachEvent",A="clientHeight",B="EventListener",C="readystatechange",D="querySelectorAll",E="add"+B,F=y+"change",G="getBoundingClientRect",H,I=window,J=I.document,K=J.documentElement,L=E in J,M=L?j:a,N=L?E:z,O=L?"remove"+B:"detachEvent",P=/\?/,Q=/{breakpoint-name}/gi,R=D in J,S=G in K,T=y in I&&a+F in I,U,V=I.screen.width,W=I.devicePixelRatio||1,X=X(),Y=Object[t].toString[g](I.operamini)==="[object OperaMini]",Z,$;return K[s]=K[s].replace(/(^|\s)no-js(\s|$)/,"$1$2"),_.version="1.2.0",_[t].riload=function(){this[w](b)},Z=function(){function j(a){if(!h){if(!J.body)return gb(j);h=b;while(a=g.shift())gb(a)}}function k(){if(!h){try{K.doScroll("left")}catch(a){return gb(k)}j()}}var a="DOMContentLoaded",d=c,g=[],h=c,i;if(J[x]===q)j();else{if(J[E])i=function(){jb(J,a,i),j()},ib(J,a,i);else if(J[z]){i=function(){J[x]===q&&(jb(J,C,i),j())},ib(J,C,i);try{d=I.frameElement==e}catch(l){}K.doScroll&&d&&k()}ib(I,f,j)}return function(a){h?gb(a):g.push(a)}}(),_});